{% extends "layout.html" %}

{% block title %}
    Portfolio
{% endblock %}
<body>
    {% for message in get_flashed_messages() %}
        <header>
            <div class="alert alert-primary border text-center" role="alert">
                {{ message }}
            </div>
        </header>
    {% endfor %}

{% block main %}
    <form action="/" method="GET">
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">Symbol</th>
              <th scope="col">Name</th>
              <th scope="col">Shares</th>
              <th scope="col">Price</th>
              <th scope="col">Total</th>
            </tr>
          </thead>
          <tbody>
            {% for stock in stocks %}
            <tr>
              <td> {{ stock['symbol'] }} </td>
              <td> {{ stock['name'] }} </td>
              <td> {{ stock['SUM(shares)'] }} </td>
              <td> {{ price[loop.index0] | usd }}</td>
              <td> {{ value[loop.index0] | usd }}</td>
            </tr>
            {% endfor %}
            <tr>
              <td>CASH</td>
              <td colspan = "3"> </td>
              <td> {{ cash | usd }} </td>
            </tr>
            <tr>
              <td colspan = "4"> </td>
              <td> <b> {{ portfolio | usd }} </b> </td>
            </tr>
          </tbody>
        </table>
    </form>
{% endblock %}
</body>